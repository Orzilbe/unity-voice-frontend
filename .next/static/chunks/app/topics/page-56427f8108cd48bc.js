(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6443],{16533:(e,t,s)=>{Promise.resolve().then(s.bind(s,36427))},36427:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(95155),r=s(11518),l=s.n(r),o=s(12115),c=s(35695),n=s(66766),i=s(41008);let d=e=>{let{isVisible:t=!1,onToggle:s,showIcon:r=!0}=e,[l,c]=(0,o.useState)(null),[d,x]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=async()=>{if(t){console.log("\uD83D\uDCCA UserProfile: Fetching user data..."),x(!0);try{let e=await (0,i.Av)("/user/data");c({FirstName:e.FirstName||"",LastName:e.LastName||"",Email:e.Email||"",PhoneNumber:e.PhoneNumber||"",EnglishLevel:e.EnglishLevel||"Not Set",AgeRange:e.AgeRange||"",ProfilePicture:e.ProfilePicture||null,CreationDate:new Date(e.CreationDate),LastLogin:e.LastLogin?new Date(e.LastLogin):void 0,Score:e.Score||0}),x(!1),console.log("✅ UserProfile: User data loaded successfully")}catch(e){console.error("❌ UserProfile: Error fetching user data:",e),x(!1)}}};t&&e()},[t]);let m=()=>{console.log("\uD83D\uDD04 UserProfile: Toggle clicked"),s&&s()};return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("div",{className:"absolute top-4 right-4",children:(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-white shadow-lg flex items-center justify-center cursor-pointer hover:shadow-xl transform hover:scale-105 transition-all duration-300",onClick:m,children:(null==l?void 0:l.ProfilePicture)?(0,a.jsx)(n.default,{src:l.ProfilePicture,alt:"Profile",width:48,height:48,className:"w-full h-full rounded-full object-cover"}):(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDC64"})})}),t&&(0,a.jsxs)("div",{className:"absolute top-20 right-4 bg-white p-6 shadow-2xl rounded-2xl w-80 z-50 border border-gray-100 transform transition-all duration-300",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"User Profile"}),d?(0,a.jsx)("div",{className:"flex justify-center items-center h-40",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full animate-spin"})}):l?(0,a.jsxs)("div",{className:"space-y-3 text-gray-800",children:[l.ProfilePicture&&(0,a.jsx)("div",{className:"flex justify-center mb-4",children:(0,a.jsx)(n.default,{src:l.ProfilePicture,alt:"Profile",width:96,height:96,className:"w-24 h-24 rounded-full object-cover border-4 border-gray-200"})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Name:"}),(0,a.jsx)("span",{children:(null==l?void 0:l.FirstName)||(null==l?void 0:l.LastName)?"".concat((null==l?void 0:l.FirstName)||""," ").concat((null==l?void 0:l.LastName)||"").trim():"Guest User"})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Email:"}),(0,a.jsx)("span",{className:"text-right",children:l.Email||"Not provided"})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Phone:"}),(0,a.jsx)("span",{children:l.PhoneNumber||"Not provided"})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"English Level:"}),(0,a.jsx)("span",{children:l.EnglishLevel})]}),l.AgeRange&&(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Age Range:"}),(0,a.jsx)("span",{children:l.AgeRange})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Score:"}),(0,a.jsx)("span",{children:l.Score})]}),(0,a.jsxs)("p",{className:"flex justify-between",children:[(0,a.jsx)("strong",{children:"Member Since:"}),(0,a.jsx)("span",{children:l.CreationDate.toLocaleDateString()})]})]})]}):(0,a.jsx)("p",{className:"text-red-500",children:"Failed to load user data"}),(0,a.jsx)("div",{className:"mt-6 space-y-2",children:(0,a.jsx)("button",{className:"w-full py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors",onClick:m,children:"Close"})})]})]})},x=e=>{let{topic:t,userId:s,onError:r}=e,l=(0,c.useRouter)(),[n,d]=(0,o.useState)(!1),x=async e=>{if(e.preventDefault(),!n){d(!0);try{if(!s||""===s||"0"===s)throw Error("לא נמצא מזהה משתמש תקין - יש להתחבר מחדש");if(!localStorage.getItem("token"))throw Error("לא נמצא טוקן אימות - יש להתחבר מחדש");let e=t.TopicName.toLowerCase().replace(/\s+/g,"-");console.log("Creating task for topic: ".concat(t.TopicName,", userId: ").concat(s));try{let a=await i.e$.create({UserId:s,TopicName:t.TopicName,Level:1,TaskType:"flashcard"});if(!a||!a.TaskId)throw Error("לא התקבל מזהה משימה מהשרת");let r=a.TaskId;console.log("Task created successfully with ID:",r);let o="/topics/".concat(e,"/tasks/flashcard?level=1&taskId=").concat(r);console.log("Navigating to: ".concat(o)),l.push(o)}catch(e){var a;if(console.error("API Error details:",e),401===e.status)throw Error("פג תוקף ההתחברות - יש להתחבר מחדש");if(403===e.status)throw Error("אין הרשאה לבצע פעולה זו");if(400===e.status)throw Error(e.message||"נתונים לא תקינים");else if(null==(a=e.responseData)?void 0:a.message)throw Error(e.responseData.message);else throw Error("אירעה שגיאה בתקשורת עם השרת")}}catch(e){if(console.error("Error in topic selection:",e),e instanceof Error&&(e.message.includes("401")||e.message.includes("אימות")||e.message.includes("להתחבר")||e.message.includes("פג תוקף"))){console.log("Authentication error detected - redirecting to login"),l.push("/login");return}r&&r(e instanceof Error?e.message:"אירעה שגיאה בהתחלת פעילות. אנא נסה שוב.")}finally{d(!1)}}};return(0,a.jsx)("div",{onClick:x,className:"group bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 cursor-pointer ".concat(n?"opacity-75":""),children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[n?(0,a.jsx)("div",{className:"w-10 h-10 border-4 border-orange-500 border-t-transparent rounded-full animate-spin"}):(0,a.jsx)("span",{className:"text-4xl group-hover:scale-110 transition-transform duration-300",children:t.Icon||"\uD83C\uDF1F"}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-2 group-hover:text-orange-600 transition-colors",children:t.TopicName}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:t.TopicHe})]})]})})};var m=s(66681);function g(){localStorage.removeItem("token"),localStorage.removeItem("user"),document.cookie="authToken=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict; Secure"}var u=s(6874),h=s.n(u),f=s(29911);let j=e=>{let{isVisible:t=!1,onToggle:s,showIcon:r=!0}=e,[c,n]=(0,o.useState)(0),i=[{id:1,title:"כרטיסיות לימוד",icon:(0,a.jsx)(f.hko,{className:"text-2xl"}),color:"bg-blue-500",hoverColor:"hover:bg-blue-600",description:"למד מילים חדשות בנושא שבחרת",details:["קבל רשימת מילים רלוונטיות לנושא","עבור על כל מילה ולמד את המשמעות שלה","חשוב ללמוד גם מילים שאתה מכיר - זה חלק מהתהליך","סמן כל מילה כ'נלמדה' כדי להמשיך הלאה","רק אחרי שתסמן את כל המילים תוכל להמשיך לשלב הבא"],requirement:"חובה לעבור על כל המילים",minScore:null},{id:2,title:"בוחן מילים",icon:(0,a.jsx)(f.gZZ,{className:"text-2xl"}),color:"bg-orange-500",hoverColor:"hover:bg-orange-600",description:"בחן את עצמך על המילים שלמדת",details:["בוחן רב ברירה על המילים שלמדת בכרטיסיות","השאלות מתבססות רק על המילים שעברת עליהן","קבל ניקוד מיידי על כל תשובה","ראה סיכום מפורט עם התשובות הנכונות והשגויות","תוכל לנסות שוב אם לא עברת"],requirement:"ציון עובר: 60% לפחות",minScore:"60%"},{id:3,title:"משימת פוסט",icon:(0,a.jsx)(f.uN,{className:"text-2xl"}),color:"bg-green-500",hoverColor:"hover:bg-green-600",description:"הגב על פוסט מרשתות חברתיות",details:["קבל פוסט מרשתות חברתיות בנושא שבחרת","הפוסט כולל את המילים שלמדת בהקשר טבעי","כתוב תגובה משמעותית על הפוסט","השתמש במילים הנדרשות בתגובה שלך","קבל משוב מפורט על התגובה מהמערכת"],requirement:"השלמת המשימה בהצלחה",minScore:null},{id:4,title:"שיחה אינטראקטיבית",icon:(0,a.jsx)(f.i0t,{className:"text-2xl"}),color:"bg-purple-500",hoverColor:"hover:bg-purple-600",description:"נהל שיחה חיה עם המערכת",details:["שוחח עם המערכת באמצעות הקול שלך","המערכת תשאל אותך שאלות בנושא","אתה יכול גם לשאול שאלות ולנהל דיאלוג טבעי","קבל משוב מיידי על הגייה, דקדוק ותוכן","השיחה מותאמת לרמה שלך ולנושא שבחרת"],requirement:"השלמת השיחה",minScore:"ניקוד: 0-400 נקודות"}],d=e=>e<c?"completed":e===c?"active":"upcoming",x=e=>{n(e)};return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("div",{className:"fixed top-4 right-20 z-40",children:(0,a.jsx)("button",{onClick:s,className:"w-12 h-12 rounded-full bg-white shadow-lg flex items-center justify-center hover:shadow-xl transform hover:scale-105 transition-all duration-300 border-2 border-blue-200 hover:border-blue-400",title:"איך עובד התהליך הלימודי?",children:(0,a.jsx)(f.__w,{className:"text-blue-600 text-xl"})})}),t&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{dir:"rtl",className:"jsx-10c0455343ba64c4 bg-white rounded-2xl shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(l(),{id:"10c0455343ba64c4",children:'@import url("https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap");.learning-guide{font-family:"Rubik",sans-serif}'}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 learning-guide",children:[(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 bg-gradient-to-r from-orange-600 to-red-600 text-white p-6 rounded-t-2xl relative",children:[(0,a.jsx)("button",{onClick:s,className:"jsx-10c0455343ba64c4 absolute top-4 left-4 w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-colors",children:(0,a.jsx)(f.QCr,{className:"text-white"})}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 text-center",children:[(0,a.jsx)("h2",{className:"jsx-10c0455343ba64c4 text-3xl font-bold mb-2",children:"איך עובד התהליך הלימודי?"}),(0,a.jsx)("p",{className:"jsx-10c0455343ba64c4 text-lg opacity-90",children:"עבור את 4 השלבים כדי לשלוט בנושא שבחרת"})]})]}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 p-6",children:[(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:i.map((e,t)=>{let s=d(t);return(0,a.jsx)("div",{onClick:()=>x(t),className:"jsx-10c0455343ba64c4 "+"relative cursor-pointer transform transition-all duration-300 hover:scale-105 ".concat("active"===s?"ring-2 ring-orange-400 ring-opacity-50":""),children:(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 "+"bg-white rounded-xl p-4 shadow-md border-2 ".concat("completed"===s?"border-green-400 bg-green-50":"active"===s?"border-orange-400 bg-orange-50":"border-gray-200"),children:[(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 flex justify-between items-start mb-3",children:[(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 "+"w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-bold ".concat("completed"===s?"bg-green-500":e.color),children:"completed"===s?(0,a.jsx)(f.CMH,{className:"text-xs"}):e.id}),t<i.length-1&&(0,a.jsx)(f.QVr,{className:"text-gray-400 text-sm mt-1"})]}),(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 "+"".concat(e.color," w-12 h-12 rounded-full flex items-center justify-center text-white mb-3 mx-auto"),children:e.icon}),(0,a.jsx)("h3",{className:"jsx-10c0455343ba64c4 text-lg font-bold text-gray-800 text-center mb-2",children:e.title}),(0,a.jsx)("p",{className:"jsx-10c0455343ba64c4 text-gray-600 text-center text-sm mb-3",children:e.description}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 "+"text-xs text-center p-2 rounded-lg ".concat(e.minScore?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"),children:[e.requirement,e.minScore&&(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 font-bold mt-1",children:e.minScore})]}),"completed"===s&&(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 absolute -top-1 -right-1 bg-green-500 text-white rounded-full p-1",children:(0,a.jsx)(f.CMH,{className:"text-xs"})}),"active"===s&&(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 absolute -top-1 -right-1 bg-orange-500 text-white rounded-full p-1 animate-pulse",children:(0,a.jsx)(f.gSK,{className:"text-xs"})})]})},e.id)})}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 bg-gray-50 rounded-xl p-6",children:[(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 flex items-center gap-4 mb-6",children:[(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 "+"".concat(i[c].color," w-12 h-12 rounded-full flex items-center justify-center text-white"),children:i[c].icon}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4",children:[(0,a.jsx)("h3",{className:"jsx-10c0455343ba64c4 text-2xl font-bold text-gray-800",children:i[c].title}),(0,a.jsx)("p",{className:"jsx-10c0455343ba64c4 text-lg text-gray-600",children:i[c].description})]})]}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4",children:[(0,a.jsxs)("h4",{className:"jsx-10c0455343ba64c4 text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.gt3,{className:"text-yellow-500"}),"מה קורה בשלב הזה?"]}),(0,a.jsx)("ul",{className:"jsx-10c0455343ba64c4 space-y-2",children:i[c].details.map((e,t)=>(0,a.jsxs)("li",{className:"jsx-10c0455343ba64c4 flex items-start gap-3",children:[(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 w-5 h-5 bg-orange-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 w-1.5 h-1.5 bg-orange-500 rounded-full"})}),(0,a.jsx)("span",{className:"jsx-10c0455343ba64c4 text-gray-700 text-sm",children:e})]},t))})]}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4",children:[(0,a.jsxs)("h4",{className:"jsx-10c0455343ba64c4 text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[(0,a.jsx)(f.CMH,{className:"text-green-500"}),"דרישות להמשך"]}),(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 bg-white rounded-lg p-4 mb-4",children:(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 text-center",children:[(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 text-2xl mb-2",children:i[c].minScore?"\uD83D\uDCCA":"✅"}),(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 text-base font-semibold text-gray-800 mb-2",children:i[c].requirement}),i[c].minScore&&(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 text-xl font-bold text-orange-600",children:i[c].minScore})]})}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h5",{className:"jsx-10c0455343ba64c4 font-bold text-blue-800 mb-2",children:"\uD83D\uDCA1 טיפ:"}),(0,a.jsxs)("p",{className:"jsx-10c0455343ba64c4 text-blue-700 text-sm",children:[0===c&&"קח את הזמן שלך ללמוד כל מילה היטב. גם אם אתה מכיר מילה, עדיין כדאי לעבור עליה כדי לחזק את הזיכרון.",1===c&&"אם לא עברת את הבוחן בפעם הראשונה, אל תדאג! חזור לכרטיסיות, חזור על המילים ונסה שוב.",2===c&&"כתוב תגובה אמיתית. ככל שהתגובה תהיה יותר מפורטת ומעניינת, כך תקבל ציון טוב יותר.",3===c&&"דבר בטבעיות ואל תפחד מטעויות. המערכת כאן כדי לעזור לך להשתפר, לא לשפוט אותך."]})]})]})]}),(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 flex justify-between items-center mt-6 pt-4 border-t border-gray-200",children:[(0,a.jsx)("button",{onClick:()=>c>0&&n(c-1),disabled:0===c,className:"jsx-10c0455343ba64c4 "+"px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(0===c?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-500 text-white hover:bg-gray-600"),children:"שלב קודם"}),(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 text-center",children:(0,a.jsxs)("span",{className:"jsx-10c0455343ba64c4 text-gray-500 text-sm",children:["שלב ",c+1," מתוך ",i.length]})}),(0,a.jsx)("button",{onClick:()=>c<i.length-1&&n(c+1),disabled:c===i.length-1,className:"jsx-10c0455343ba64c4 "+"px-4 py-2 rounded-lg font-medium transition-all duration-300 ".concat(c===i.length-1?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-orange-500 text-white hover:bg-orange-600"),children:"שלב הבא"})]})]}),(0,a.jsx)("div",{className:"jsx-10c0455343ba64c4 text-center mt-6",children:(0,a.jsxs)("div",{className:"jsx-10c0455343ba64c4 bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-xl p-6",children:[(0,a.jsx)("h3",{className:"jsx-10c0455343ba64c4 text-xl font-bold mb-2",children:"מוכן להתחיל?"}),(0,a.jsx)("p",{className:"jsx-10c0455343ba64c4 mb-4",children:"בחר נושא ותתחיל את המסע הלימודי שלך עכשיו!"}),(0,a.jsx)("button",{onClick:s,className:"jsx-10c0455343ba64c4 bg-white text-orange-600 px-6 py-2 rounded-lg font-bold hover:bg-orange-50 transition-colors",children:"התחל ללמוד"})]})})]})]})]})})]})};function p(){let[e,t]=(0,o.useState)([]),[s,r]=(0,o.useState)({level:"",points:0,totalScore:0,completedTasks:0,activeSince:"",nextLevel:"",pointsToNextLevel:100}),[n,u]=(0,o.useState)(!1),[f,p]=(0,o.useState)(null),[b,v]=(0,o.useState)(!1),{isAuthenticated:N,isLoading:y,user:w,isInitialized:S,logout:T}=(0,m.A)(),k=(0,c.useRouter)();console.log("\uD83D\uDD0D Topics page - Auth State:",{isAuthenticated:N,isLoading:y,isInitialized:S,user:w}),(0,o.useEffect)(()=>{(async()=>{if(console.log("\uD83D\uDD04 Topics page - Checking auth:",{isInitialized:S,isLoading:y,isAuthenticated:N}),!S||y||N)S&&!y&&N&&console.log("✅ User authenticated, staying on topics page");else{console.log("❌ User not authenticated, redirecting to login...");try{await k.push("/login"),console.log("✅ Navigation to login initiated")}catch(e){console.error("❌ Navigation failed:",e),window.location.href="/login"}}})()},[N,y,S,k]),(0,o.useEffect)(()=>{if(N){let e=async()=>{try{console.log("\uD83D\uDD0D === DEBUG: Starting fetchUserData ==="),console.log("\uD83D\uDD0D Current user from useAuth:",w),console.log("\uD83D\uDD0D Token in localStorage:",localStorage.getItem("token")),console.log("\uD83D\uDD0D IsAuthenticated:",N);let e=await i.kV.getData();console.log("\uD83D\uDD0D === RAW API Response ==="),console.log("\uD83D\uDD0D Full response:",e),console.log("\uD83D\uDD0D Response type:",typeof e),console.log("\uD83D\uDD0D Response keys:",Object.keys(e||{})),console.log("\uD83D\uDD0D Score field:",null==e?void 0:e.Score),console.log("\uD83D\uDD0D CurrentLevel field:",null==e?void 0:e.currentLevel),console.log("\uD83D\uDD0D CreationDate field:",null==e?void 0:e.CreationDate),console.log("\uD83D\uDD0D === END RAW RESPONSE ===");let t={level:e.currentLevel||"Beginner",points:e.currentLevelPoints||0,totalScore:e.Score||0,completedTasks:e.completedTasksCount||0,activeSince:e.CreationDate?new Date(e.CreationDate).toLocaleDateString():"Today",nextLevel:e.nextLevel||"Intermediate",pointsToNextLevel:e.pointsToNextLevel||100};console.log("\uD83D\uDD0D === MAPPED USER DATA ==="),console.log("\uD83D\uDD0D Mapped data:",t),console.log("\uD83D\uDD0D Final totalScore:",t.totalScore),console.log("\uD83D\uDD0D === END MAPPED DATA ==="),r(t),console.log("✅ User data set successfully")}catch(t){console.error("❌ === API FAILED ==="),console.error("❌ Error details:",t),console.error("❌ Error type:",typeof t),console.error("❌ Error message:",t instanceof Error?t.message:"Unknown error"),console.error("❌ === USING FALLBACK DATA ===");let e={level:"Beginner",points:150,totalScore:850,completedTasks:12,activeSince:new Date().toLocaleDateString(),nextLevel:"Intermediate",pointsToNextLevel:250};console.log("\uD83D\uDD04 Setting fallback data:",e),r(e)}};(async()=>{console.log("\uD83D\uDD04 Starting to fetch topics...");let e=[{TopicName:"Diplomacy and International Relations",TopicHe:"דיפלומטיה ויחסים בינלאומיים",Icon:"\uD83E\uDD1D"},{TopicName:"Economy and Entrepreneurship",TopicHe:"כלכלה ויזמות",Icon:"\uD83D\uDCB0"},{TopicName:"Environment and Sustainability",TopicHe:"סביבה וקיימות",Icon:"\uD83C\uDF31"},{TopicName:"History and Heritage",TopicHe:"הסטוריה ומורשת",Icon:"\uD83C\uDFDB️"},{TopicName:"Holocaust and Revival",TopicHe:"שואה ותקומה",Icon:"✡️"},{TopicName:"Innovation and Technology",TopicHe:"חדשנות וטכנולוגיה",Icon:"\uD83D\uDCA1"},{TopicName:"Iron Swords War",TopicHe:"מלחמת חרבות ברזל",Icon:"⚔️"},{TopicName:"Society and Multiculturalism",TopicHe:"חברה ורב תרבותיות",Icon:"\uD83C\uDF0D"}];try{let s=new Promise((e,t)=>setTimeout(()=>t(Error("Request timeout after 5 seconds")),5e3)),a=await Promise.race([i.l6.getAll(),s]);console.log("✅ Topics data received:",a),console.log("\uD83D\uDD0D Topics count:",Array.isArray(a)?a.length:"Not array"),console.log("\uD83D\uDD0D First topic:",null==a?void 0:a[0]),Array.isArray(a)&&a.length>0?(t(a),console.log("✅ Topics state updated with API data")):(console.log("⚠️ API returned empty or invalid data, using fallback"),t(e))}catch(s){console.error("❌ Error fetching topics:",s),console.error("❌ Error type:",typeof s),console.error("❌ Error details:",s instanceof Error?s.message:"Unknown error"),console.log("\uD83D\uDD04 Using fallback topics data"),t(e)}})(),e()}},[N]);let E=e=>{p(e),setTimeout(()=>p(null),5e3)};return!S||y?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-gradient-to-br from-blue-50 to-teal-50 font-sans",children:(0,a.jsxs)("div",{className:"flex flex-col items-center bg-white p-8 rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"text-2xl text-teal-600 mb-4",children:S?"Loading Topics...":"Initializing..."}),(0,a.jsx)("div",{className:"w-16 h-16 border-t-4 border-b-4 border-teal-500 rounded-full animate-spin mb-4"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 text-center",children:S?(0,a.jsx)("p",{children:"Fetching your personalized topics..."}):(0,a.jsx)("p",{children:"Setting up your session..."})}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Status: ",S?"Loading Data":"Initializing Auth"]})]})}):N?(console.log("✅ Topics page: Rendering content for authenticated user"),console.log("\uD83D\uDD0D Current topics in render:",e),console.log("\uD83D\uDD0D Topics length:",e.length),(0,a.jsxs)("div",{className:"jsx-26af8af8a308f6d6 min-h-screen bg-gradient-to-br from-yellow-50 via-orange-50 to-red-50 p-6 relative",children:[(0,a.jsx)(l(),{id:"26af8af8a308f6d6",children:'@import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap");body{font-family:"Poppins",sans-serif}'}),(0,a.jsx)(d,{isVisible:n,onToggle:()=>u(!n),showIcon:!0}),(0,a.jsx)(j,{isVisible:b,onToggle:()=>v(!b),showIcon:!0}),(0,a.jsxs)("div",{className:"jsx-26af8af8a308f6d6 max-w-7xl mx-auto",children:[(0,a.jsx)("h1",{className:"jsx-26af8af8a308f6d6 text-5xl font-bold mb-8 text-center bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent",children:"Choose Your Topic"}),(0,a.jsxs)("div",{className:"jsx-26af8af8a308f6d6 grid grid-cols-3 gap-4 mb-10",children:[(0,a.jsxs)("div",{className:"jsx-26af8af8a308f6d6 bg-white rounded-xl shadow-md p-4 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)("span",{className:"jsx-26af8af8a308f6d6 text-xl",children:"\uD83C\uDFAF"})}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-sm text-gray-500",children:"Total Score"}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-2xl font-bold text-orange-600",children:s.totalScore}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-xs text-gray-400",children:"points"})]}),(0,a.jsxs)("div",{className:"jsx-26af8af8a308f6d6 bg-white rounded-xl shadow-md p-4 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)("span",{className:"jsx-26af8af8a308f6d6 text-xl",children:"✅"})}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-sm text-gray-500",children:"Completed Tasks"}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-2xl font-bold text-orange-600",children:s.completedTasks}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-xs text-gray-400",children:"activities"})]}),(0,a.jsxs)("div",{className:"jsx-26af8af8a308f6d6 bg-white rounded-xl shadow-md p-4 flex flex-col items-center",children:[(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center mb-2",children:(0,a.jsx)("span",{className:"jsx-26af8af8a308f6d6 text-xl",children:"⏱️"})}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-sm text-gray-500",children:"Active Since"}),(0,a.jsx)("p",{className:"jsx-26af8af8a308f6d6 text-2xl font-bold text-orange-600",children:s.activeSince})]})]}),w&&"admin"===w.role&&(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 flex justify-center mb-4",children:(0,a.jsxs)(h(),{href:"/dashboard",onClick:e=>{if(console.log("Dashboard link clicked"),!localStorage.getItem("token")){e.preventDefault(),console.error("No token found in localStorage");return}},className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-700 text-white font-semibold rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center cursor-pointer",children:[(0,a.jsx)("span",{className:"jsx-26af8af8a308f6d6 mr-2 text-xl",children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{className:"jsx-26af8af8a308f6d6",children:"Dashboard"})]})}),f&&(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 bg-red-100 text-red-700 p-4 rounded-lg mb-6 text-center",children:f}),(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(e=>(0,a.jsx)(x,{topic:e,userId:(null==w?void 0:w.UserId)||(null==w?void 0:w.userId)||(null==w?void 0:w.id)||"",onError:E},e.TopicName))})]}),(0,a.jsx)("div",{className:"jsx-26af8af8a308f6d6 absolute top-4 left-4 flex space-x-3",children:(0,a.jsx)("button",{onClick:async()=>{console.log("\uD83D\uDC4B Logout button clicked - starting cleanup...");try{await T(),console.log("✅ useAuth logout completed"),g(),console.log("✅ clearAuthData completed"),localStorage.clear(),console.log("✅ localStorage cleared"),document.cookie.split(";").forEach(e=>{let t=e.indexOf("="),s=t>-1?e.substr(0,t):e;document.cookie="".concat(s.trim(),"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/")}),console.log("✅ All cookies cleared"),console.log("\uD83D\uDD04 Redirecting to login..."),k.push("/login")}catch(e){console.error("❌ Error during logout:",e),g(),localStorage.clear(),window.location.href="/login"}},className:"jsx-26af8af8a308f6d6 w-12 h-12 rounded-full bg-white shadow-lg flex items-center justify-center hover:shadow-xl transform hover:scale-105 transition-all duration-300",children:(0,a.jsx)("span",{className:"jsx-26af8af8a308f6d6 text-2xl",children:"\uD83D\uDC4B"})})})]})):(console.log("\uD83D\uDEAB Topics page: User not authenticated, returning null..."),null)}},74436:(e,t,s)=>{"use strict";s.d(t,{k5:()=>d});var a=s(12115),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(r),o=["attr","size","title"];function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e}).apply(this,arguments)}function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){var a,r,l;a=e,r=t,l=s[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in a?Object.defineProperty(a,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function d(e){return t=>a.createElement(x,c({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,s)=>a.createElement(t.tag,i({key:s},t.attr),e(t.child)))}(e.child))}function x(e){var t=t=>{var s,{attr:r,size:l,title:n}=e,d=function(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}(e,o),x=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:s,style:i(i({color:e.color||t.color},t.style),e.style),height:x,width:x,xmlns:"http://www.w3.org/2000/svg"}),n&&a.createElement("title",null,n),e.children)};return void 0!==l?a.createElement(l.Consumer,null,e=>t(e)):t(r)}}},e=>{var t=t=>e(e.s=t);e.O(0,[6711,6874,9443,6681,8441,1684,7358],()=>t(16533)),_N_E=e.O()}]);