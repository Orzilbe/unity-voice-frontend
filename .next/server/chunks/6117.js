exports.id=6117,exports.ids=[6117],exports.modules={8587:()=>{},15909:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,86346,23)),Promise.resolve().then(s.t.bind(s,27924,23)),Promise.resolve().then(s.t.bind(s,35656,23)),Promise.resolve().then(s.t.bind(s,40099,23)),Promise.resolve().then(s.t.bind(s,38243,23)),Promise.resolve().then(s.t.bind(s,28827,23)),Promise.resolve().then(s.t.bind(s,62763,23)),Promise.resolve().then(s.t.bind(s,97173,23))},21989:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,16444,23)),Promise.resolve().then(s.t.bind(s,16042,23)),Promise.resolve().then(s.t.bind(s,88170,23)),Promise.resolve().then(s.t.bind(s,49477,23)),Promise.resolve().then(s.t.bind(s,29345,23)),Promise.resolve().then(s.t.bind(s,12089,23)),Promise.resolve().then(s.t.bind(s,46577,23)),Promise.resolve().then(s.t.bind(s,31307,23))},61135:()=>{},68259:()=>{},70216:(e,r,s)=>{"use strict";s.d(r,{Av:()=>n,Ly:()=>g,bZ:()=>i,e$:()=>d,kV:()=>c,l6:()=>u,zG:()=>l});let t=process.env.NEXT_PUBLIC_API_URL;async function o(e){let r=e.headers.get("content-type");if(console.log(`Response status: ${e.status}, Content-Type: ${r}`),r&&r.includes("application/json"))try{let r=await e.json();if(!e.ok){let s={status:e.status,statusText:e.statusText,message:r.message||r.error||"API request failed",responseData:r,url:e.url};throw console.error("API Error (JSON):",s),s}return r}catch(r){if(!e.ok){let s={status:e.status,statusText:e.statusText,message:`Failed to parse JSON response: ${r}`,responseData:null,url:e.url};throw console.error("API Error (JSON Parse Failed):",s),s}throw r}try{let r=await e.text();if(console.log(`Response text (first 200 chars): ${r.substring(0,200)}`),!e.ok){let s={status:e.status,statusText:e.statusText,message:r||"API request failed",responseData:r,url:e.url};throw console.error("API Error (Text):",s),s}return r}catch(s){let r={status:e.status,statusText:e.statusText,message:`Failed to read response: ${s}`,responseData:null,url:e.url};throw console.error("API Error (Text Read Failed):",r),r}}async function a(e,r={}){let s={"Content-Type":"application/json",...r.headers},n=`${t}${e}`;console.log(`Making API call to: ${n}`);try{let e=await fetch(n,{...r,headers:s,credentials:"include"});return await o(e)}catch(r){throw console.error(`API call failed for ${e}:`,{url:n,error:r,errorMessage:r instanceof Error?r.message:"Unknown error",errorStack:r instanceof Error?r.stack:void 0,headers:s}),r&&"object"==typeof r&&(r.endpoint=e,r.fullUrl=n),r}}async function n(e,r={}){return a(e,r)}async function i(){return a("/health")}let l={login:async e=>a("/auth/login",{method:"POST",body:JSON.stringify(e)}),register:async e=>a("/auth/register",{method:"POST",body:JSON.stringify(e)}),validate:async()=>a("/auth/validate",{method:"POST",body:JSON.stringify({})}),logout:async()=>a("/auth/logout",{method:"POST"})},c={getProfile:async()=>a("/user/profile"),updateProfile:async e=>a("/user/profile",{method:"PUT",body:JSON.stringify(e)}),getData:async()=>a("/user/data")},u={getAll:async()=>a("/topics"),getById:async e=>a(`/topics/${e}`),getUserProgress:async()=>a("/topics/progress")},d={create:async e=>a("/tasks",{method:"POST",body:JSON.stringify(e)}),getById:async e=>a(`/tasks/${e}`),update:async(e,r)=>a(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(r)}),getUserTasks:async e=>a(`/tasks/user/${e}`)},g={getByTopicAndLevel:async(e,r)=>{try{console.log(`🚀 Fetching flashcards: topic="${e}", level="${r}"`);let s=await a(`/flashcards/${encodeURIComponent(e)}/${r}`);if(s&&s.success)return console.log(`✅ Received ${s.data.length} unlearned flashcards`),s.data;if(Array.isArray(s))return console.log(`✅ Received ${s.length} unlearned flashcards (direct array)`),s;throw console.error("❌ Unexpected response format:",s),Error("Invalid response format from flashcards API")}catch(e){throw console.error("❌ Error fetching flashcards:",e),e}},create:async e=>a("/flashcards",{method:"POST",body:JSON.stringify(e)}),markAsLearned:async(e,r,s)=>a("/flashcards/mark-learned",{method:"POST",body:JSON.stringify({WordId:e,TaskId:r,TopicName:s})})}},87979:(e,r,s)=>{"use strict";s.d(r,{A:()=>l});var t=s(43210),o=s(70216);let a=[],n={isAuthenticated:!1,isLoading:!0,user:null,error:null,isInitialized:!1},i=e=>{n=e,a.forEach(r=>r(e))},l=()=>{let[e,r]=(0,t.useState)(n);(0,t.useEffect)(()=>{let e=e=>{r(e)};return a.push(e),()=>{a=a.filter(r=>r!==e)}},[]);let s=(0,t.useCallback)(e=>{r(e),i(e)},[]),l=(0,t.useCallback)(async()=>{console.log("\uD83D\uDD0D Starting auth validation...");try{let e=await o.zG.validate();if(console.log("\uD83D\uDCE1 Validation response:",e),!e.valid&&!e.success)return localStorage.removeItem("user"),s({isAuthenticated:!1,isLoading:!1,user:null,error:e.message||"Authentication failed",isInitialized:!0}),!1;{let r=e.user;if(!r||!r.role&&!r.UserRole){let e=localStorage.getItem("user");if(e)try{r={...JSON.parse(e),...r}}catch(e){console.error("Error parsing stored user data:",e)}}return r&&(r={...r,role:r.role||r.UserRole||"user",UserRole:r.UserRole||r.role||"user"}),s({isAuthenticated:!0,isLoading:!1,user:r,error:null,isInitialized:!0}),!0}}catch(r){console.error("Auth validation error:",r);let e=localStorage.getItem("user");if(e)try{let r=JSON.parse(e);return s({isAuthenticated:!0,isLoading:!1,user:r,error:null,isInitialized:!0}),!0}catch(e){console.error("Error parsing stored user data:",e)}return localStorage.removeItem("user"),s({isAuthenticated:!1,isLoading:!1,user:null,error:r instanceof Error?r.message:"Authentication error",isInitialized:!0}),!1}},[s]);(0,t.useEffect)(()=>{l()},[l]);let c=async(r,t,a=!0)=>{try{console.log("\uD83D\uDD10 Starting login process..."),s({...e,isLoading:!0});let a=await o.zG.login({email:r,password:t});if(console.log("\uD83D\uDCE1 Login response:",a),!a.success)return s({isAuthenticated:!1,isLoading:!1,user:null,error:a.message||"Login failed",isInitialized:!0}),{success:!1,message:a.message||"Login failed"};{let e=a.user||{email:r},t={...e,role:e?.role||e?.UserRole||"user",UserRole:e?.UserRole||e?.role||"user"};return localStorage.setItem("user",JSON.stringify(t)),s({isAuthenticated:!0,isLoading:!1,user:t,error:null,isInitialized:!0}),{success:!0}}}catch(r){if(console.error("❌ Login error:",r),r.responseData){let e=r.responseData.message||r.message||"Login failed";return console.log("API Error details:",r.responseData),s({isAuthenticated:!1,isLoading:!1,user:null,error:e,isInitialized:!0}),{success:!1,message:e,details:r.responseData.details}}let e=r instanceof Error?r.message:"An unexpected error occurred";return s({isAuthenticated:!1,isLoading:!1,user:null,error:e,isInitialized:!0}),{success:!1,message:e}}},u=async()=>{console.log("\uD83D\uDC4B Logging out...");try{await o.zG.logout()}catch(e){console.error("Logout API call failed:",e)}localStorage.removeItem("user"),s({isAuthenticated:!1,isLoading:!1,user:null,error:null,isInitialized:!0})};return{...e,login:c,logout:u,validateAuth:l}}},94431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>c,metadata:()=>l});var t=s(37413),o=s(58745),a=s.n(o),n=s(17240),i=s.n(n);s(61135);let l={title:"Unity Voice",description:"Unity Voice app"};function c({children:e}){return(0,t.jsx)("html",{lang:"en",children:(0,t.jsx)("body",{className:`${a().variable} ${i().variable} antialiased`,children:e})})}}};