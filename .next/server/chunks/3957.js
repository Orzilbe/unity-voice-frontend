exports.id=3957,exports.ids=[3957],exports.modules={1759:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,86346,23)),Promise.resolve().then(o.t.bind(o,27924,23)),Promise.resolve().then(o.t.bind(o,35656,23)),Promise.resolve().then(o.t.bind(o,40099,23)),Promise.resolve().then(o.t.bind(o,38243,23)),Promise.resolve().then(o.t.bind(o,28827,23)),Promise.resolve().then(o.t.bind(o,62763,23)),Promise.resolve().then(o.t.bind(o,97173,23))},61135:()=>{},69717:()=>{},70216:(e,t,o)=>{"use strict";o.d(t,{Av:()=>a,Ly:()=>g,bZ:()=>l,e$:()=>d,kV:()=>c,l6:()=>u,zG:()=>i});let s=process.env.NEXT_PUBLIC_API_URL;async function r(e){let t=e.headers.get("content-type");if(console.log(`📡 Response: ${e.status} ${e.statusText}, Content-Type: ${t}`),t&&t.includes("application/json"))try{let t=await e.json();if(console.log("✅ JSON parsed successfully:",t),!e.ok){let o={status:e.status,statusText:e.statusText,message:t.message||t.error||"API request failed",responseData:t,url:e.url};throw console.error("❌ API Error (JSON):",o),o}return t}catch(t){if(!e.ok){let o={status:e.status,statusText:e.statusText,message:`Failed to parse JSON response: ${t}`,responseData:null,url:e.url};throw console.error("❌ API Error (JSON Parse Failed):",o),o}console.warn("⚠️ JSON parse failed on successful response:",t);try{let t=await e.text();return console.log("\uD83D\uDCC4 Response as text:",t),JSON.parse(t)}catch(e){throw console.error("❌ Second parse attempt failed:",e),Error(`Could not parse response as JSON: ${t}`)}}try{let t=await e.text();if(console.log(`📄 Response text (first 200 chars): ${t.substring(0,200)}`),!e.ok){let o={status:e.status,statusText:e.statusText,message:t||"API request failed",responseData:t,url:e.url};throw console.error("❌ API Error (Text):",o),o}return t}catch(o){let t={status:e.status,statusText:e.statusText,message:`Failed to read response: ${o}`,responseData:null,url:e.url};throw console.error("❌ API Error (Text Read Failed):",t),t}}async function n(e,t={}){e.startsWith("/")||(e="/"+e);let o={"Content-Type":"application/json",...t.headers};console.log("⚠️ No token found - sending request without authentication");let a=`${s}${e}`;console.log(`🚀 Making API call to: ${a}`,{hasToken:!1,environment:"production",method:t.method||"GET",headers:o});try{let s=await fetch(a,{...t,headers:o,credentials:"include"}),n=await r(s);return console.log(`✅ API call completed for ${e}:`,n),n}catch(t){throw console.error(`💥 API call failed for ${e}:`,{url:a,error:t,errorMessage:t instanceof Error?t.message:"Unknown error",headers:o}),t&&"object"==typeof t&&(t.endpoint=e,t.fullUrl=a),t}}async function a(e,t={}){return n(e,t)}async function l(){return n("/health")}console.log("\uD83D\uDD27 API Configuration:",{NEXT_PUBLIC_API_URL:process.env.NEXT_PUBLIC_API_URL,API_URL:s,NODE_ENV:"production"});let i={login:async e=>{console.log("\uD83D\uDD11 Starting login process...",{email:e.email});try{let t=await n("/auth/login",{method:"POST",body:JSON.stringify(e)});if(console.log("\uD83D\uDD0D Raw login result:",t),console.log("\uD83D\uDD0D Result type:",typeof t),console.log("\uD83D\uDD0D Has token?",!!t?.token),console.log("\uD83D\uDD0D Has user?",!!t?.user),console.log("\uD83D\uDD0D Token preview:",t?.token?t.token.substring(0,20)+"...":"No token"),!t||!t.token)return console.log("❌ No token found in result"),{success:!1,message:"No token received from server",responseData:t};{console.log("\uD83D\uDCBE Saving token to localStorage..."),localStorage.setItem("token",t.token),console.log("\uD83C\uDF6A Saving token to cookie..."),function(e){if("undefined"!=typeof document){let t="https:"===window.location.protocol,o=[`authToken=${e}`,"path=/",...t?["SameSite=None","Secure"]:["SameSite=Lax"],"max-age=86400"];document.cookie=o.join("; "),console.log("\uD83C\uDF6A Token set in cookie:",{isProduction:t,cookieString:o.join("; ")})}}(t.token);let o=localStorage.getItem("token");console.log("✅ Token verification after save:",o?"SUCCESS":"FAILED");let s={success:!0,token:t.token,user:t.user||{email:e.email},message:"Login successful"};return console.log("\uD83C\uDF89 Login response:",s),s}}catch(e){return console.error("\uD83D\uDCA5 Login error:",e),{success:!1,message:e instanceof Error?e.message:"Login failed",error:e}}},register:async e=>n("/auth/register",{method:"POST",body:JSON.stringify(e)}),validate:async()=>(console.log("\uD83D\uDD0D Validating token..."),console.log("❌ No token found for validation"),{success:!1,message:"No token found"}),logout:async()=>{if(console.log("\uD83D\uDC4B Starting logout process..."),localStorage.removeItem("token"),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),console.log("\uD83D\uDDD1️ Cleared localStorage"),"undefined"!=typeof document){let e=["authToken=","path=/","expires=Thu, 01 Jan 1970 00:00:00 GMT",..."https:"===window.location.protocol?["SameSite=None","Secure"]:["SameSite=Lax"]];document.cookie=e.join("; "),console.log("\uD83C\uDF6A Cleared cookie")}try{return await n("/auth/logout",{method:"POST"})}catch(e){return console.log("⚠️ Logout API call failed, but local cleanup completed"),{success:!0,message:"Logged out locally"}}}},c={getProfile:async()=>n("/user/profile"),updateProfile:async e=>n("/user/profile",{method:"PUT",body:JSON.stringify(e)}),getData:async()=>n("/user/data")},u={getAll:async()=>n("/topics"),getById:async e=>n(`/topics/${e}`),getUserProgress:async()=>n("/topics/progress")},d={create:async e=>n("/tasks",{method:"POST",body:JSON.stringify(e)}),getById:async e=>n(`/tasks/${e}`),update:async(e,t)=>n(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),getUserTasks:async e=>n(`/tasks/user/${e}`)},g={getByTopicAndLevel:async(e,t)=>{try{console.log(`🚀 Fetching flashcards: topic="${e}", level="${t}"`);let o=await n(`/flashcards/${encodeURIComponent(e)}/${t}`);if(o&&o.success)return console.log(`✅ Received ${o.data.length} flashcards`),o.data;if(Array.isArray(o))return console.log(`✅ Received ${o.length} flashcards (direct array)`),o;throw console.error("❌ Unexpected response format:",o),Error("Invalid response format from flashcards API")}catch(e){throw console.error("❌ Error fetching flashcards:",e),e}},create:async e=>n("/flashcards",{method:"POST",body:JSON.stringify(e)}),markAsLearned:async(e,t,o)=>n("/flashcards/mark-learned",{method:"POST",body:JSON.stringify({WordId:e,TaskId:t,TopicName:o})})}},71495:(e,t,o)=>{Promise.resolve().then(o.t.bind(o,16444,23)),Promise.resolve().then(o.t.bind(o,16042,23)),Promise.resolve().then(o.t.bind(o,88170,23)),Promise.resolve().then(o.t.bind(o,49477,23)),Promise.resolve().then(o.t.bind(o,29345,23)),Promise.resolve().then(o.t.bind(o,12089,23)),Promise.resolve().then(o.t.bind(o,46577,23)),Promise.resolve().then(o.t.bind(o,31307,23))},83285:()=>{},87979:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var s=o(43210),r=o(70216);let n=[],a={isAuthenticated:!1,isLoading:!0,user:null,error:null,isInitialized:!1},l=e=>{a=e,n.forEach(t=>t(e))},i=()=>{let[e,t]=(0,s.useState)(a);(0,s.useEffect)(()=>{let e=e=>t(e);return n.push(e),()=>{n=n.filter(t=>t!==e)}},[]);let o=(0,s.useCallback)(e=>{l(e)},[]),i=(0,s.useCallback)(async()=>{if(!localStorage.getItem("token"))return void o({isAuthenticated:!1,isLoading:!1,user:null,error:null,isInitialized:!0});try{let e=await r.zG.validate();if(e.success){let t=e.user||JSON.parse(localStorage.getItem("user")||"null");localStorage.setItem("user",JSON.stringify(t)),o({isAuthenticated:!0,isLoading:!1,user:t,error:null,isInitialized:!0})}else localStorage.removeItem("token"),localStorage.removeItem("user"),o({isAuthenticated:!1,isLoading:!1,user:null,error:e.message,isInitialized:!0})}catch(e){localStorage.removeItem("token"),localStorage.removeItem("user"),o({isAuthenticated:!1,isLoading:!1,user:null,error:"Validation error",isInitialized:!0})}},[o]);(0,s.useEffect)(()=>{i()},[i]);let c=async(e,t)=>{o({...a,isLoading:!0});try{let s=await r.zG.login({email:e,password:t});if(s.success||s.token){localStorage.setItem("token",s.token);let t=s.user||{email:e};return localStorage.setItem("user",JSON.stringify(t)),o({isAuthenticated:!0,isLoading:!1,user:t,error:null,isInitialized:!0}),{success:!0,token:s.token}}return o({isAuthenticated:!1,isLoading:!1,user:null,error:s.message||"Login failed",isInitialized:!0}),{success:!1,message:s.message}}catch(e){return o({isAuthenticated:!1,isLoading:!1,user:null,error:e.message,isInitialized:!0}),{success:!1,message:e.message}}},u=async()=>{try{await r.zG.logout()}catch{}localStorage.removeItem("token"),localStorage.removeItem("user"),o({isAuthenticated:!1,isLoading:!1,user:null,error:null,isInitialized:!0})};return{...e,login:c,logout:u,validateAuth:i}}},94431:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>c,metadata:()=>i});var s=o(37413),r=o(58745),n=o.n(r),a=o(17240),l=o.n(a);o(61135);let i={title:"Unity Voice",description:"Unity Voice app"};function c({children:e}){return(0,s.jsx)("html",{lang:"en",children:(0,s.jsx)("body",{className:`${n().variable} ${l().variable} antialiased`,children:e})})}}};