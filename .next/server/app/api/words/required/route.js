(()=>{var e={};e.id=7047,e.ids=[7047],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},23725:(e,r,t)=>{"use strict";async function n(e,r={}){return fetch(e,{credentials:"include",headers:{"Content-Type":"application/json",...r.headers||{}},...r})}t.d(r,{v:()=>n})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},68140:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>m,routeModule:()=>p,serverHooks:()=>v,workAsyncStorage:()=>h,workUnitAsyncStorage:()=>g});var n={};t.r(n),t.d(n,{GET:()=>l});var o=t(96559),s=t(48088),i=t(37719),a=t(32190),u=t(43205),c=t.n(u),d=t(23725);async function l(e){try{let r=e.headers.get("authorization");if(!r||!r.startsWith("Bearer "))return a.NextResponse.json({error:"Unauthorized"},{status:401});let t=r.substring(7),n=function(e){try{let r=process.env.JWT_SECRET||"default_secret",t=c().verify(e,r),n=t.id||t.userId||t.sub;return{isValid:!!n,userId:n||""}}catch(e){return console.error("Error validating token:",e),{isValid:!1,userId:""}}}(t);if(!n.isValid)return a.NextResponse.json({error:"Invalid token"},{status:401});let{searchParams:o}=new URL(e.url),s=o.get("topic"),i=o.get("level");if(!s)return a.NextResponse.json({error:"Topic parameter is required"},{status:400});console.log(`Fetching required words for topic: ${s}, level: ${i}`);try{let e=await (0,d.v)(`http://localhost:5000/api/words/required?topic=${encodeURIComponent(s)}&level=${i||"1"}&userId=${n.userId}`,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(e.ok){let r=await e.json();return console.log("Backend required words successful"),a.NextResponse.json(r)}throw console.error("Backend required words failed:",e.status),Error(`Backend error: ${e.status}`)}catch(r){console.error("Error connecting to backend API:",r);let e=function(e){let r={"History and Heritage":["culture","tradition","heritage","ancient","historical","legacy","monument","civilization"],"Innovation and Technology":["technology","innovation","development","research","solution","advancement","digital","breakthrough"],"Economy and Entrepreneurship":["business","market","growth","investment","entrepreneurship","startup","economy","financial"],"Diplomacy and International Relations":["relations","cooperation","negotiation","partnership","dialogue","diplomacy","international","agreement"],"Environment and Sustainability":["environment","sustainability","renewable","green","conservation","climate","natural","ecological"],"Society and Culture":["society","community","cultural","social","diversity","integration","values","identity"]},t=Object.keys(r).find(r=>e.toLowerCase().includes(r.toLowerCase())||r.toLowerCase().includes(e.toLowerCase()));return t?r[t]:["important","example","experience","opinion","interesting","development","opportunity","challenge"]}(s);return a.NextResponse.json({success:!0,data:e,source:"fallback"})}}catch(e){return console.error("Error in required words API:",e),a.NextResponse.json({error:"Failed to fetch required words",details:e instanceof Error?e.message:"Unknown error"},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/words/required/route",pathname:"/api/words/required",filename:"route",bundlePath:"app/api/words/required/route"},resolvedPagePath:"C:\\Projects\\110625\\unity-voice-frontend\\src\\app\\api\\words\\required\\route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:h,workUnitAsyncStorage:g,serverHooks:v}=p;function m(){return(0,i.patchFetch)({workAsyncStorage:h,workUnitAsyncStorage:g})}},78335:()=>{},79428:e=>{"use strict";e.exports=require("buffer")},96487:()=>{}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[7719,580,3205],()=>t(68140));module.exports=n})();